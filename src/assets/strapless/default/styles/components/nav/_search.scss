// ===========================================
//
//      SEARCH
//      ....................
//      - assumed to be nested within <form>
//      - in order to place search button within search field,
//        we wrap the input and button within the same container and style it to mimic an infput field
//
// ===========================================


// .container

.searchbar {
    display: block;
    width: 100%;
    height: 100%;
    // max-height: $section-height-short;
    // background-color: #eaeaea;
    // margin: auto auto $scale_2;
    .search {
        padding: $scale_2 0;
    }
    .pseudo-search {
        border: 0.2rem solid #eaeaea;
    }
}




//  8. widths
// ************************
//  - for unique search widths, either wrap the search form in .search,
//    or add .search to the form itself
// ************************

.search form,
form.search {
    max-width: $base-max-width;
}


//  8. pseudo-search wrapper
// ************************
//  - to place the search button within and to the right side of the search element
//    we had to simulate the exterior of the ssearch input, to nest everything.
//  - this works out well for keeping code tidy, because the search inputs are getting nested within forms anyway,
//    may as well merge them.
//  - usage:
//
//      <form class="pseudo-search">
//          <input type="search">
//          <label>
//              <select>
//          <label>
//              <select>
//          <button>
//      </form>
//
// ************************

.pseudo-search {

    display: flex;
    // TODO: non-flex fallback
    // @include span(12 of 12);
    border: 0.2rem solid $wht; // $gry
    background: transparent;

    @include anim($global-animation);
    & > * {@include anim($global-animation);}

    @media #{$medium-down} { display: block; @include clear(); }

    //  forces equal heights - TODO: improve this
    // ************************
    input[type="search"], button, select, select > option { max-height: 3.157rem + $base-horizontal-small; }
    input[type="search"], button, select > option { min-height: 3.157rem + $base-horizontal-small; }
    select > option { line-height: 3.157rem  + $base-horizontal-small; vertical-align: middle; }

    // search input
    // ************************
    & > input[type="search"] {
        margin: auto;
        padding: 1rem $base-vertical;
        border:0;
        color: $placholderTextcolor; // $gry
        background-color: transparent;
        &:active, &:active:hover,
        &:focus, &:focus:active {background-color: $wht; color: $slate;}
        @media #{$medium-down} { @include span(12 of 12); }
    }

    // search button
    // ************************
    button,
    .search-button {
        padding: 1em $base-vertical;
        margin: auto 0;
        border: none;
        background: transparent;
        cursor: pointer;
        color: $placholderTextcolor;
        @include hover() { color: $slate; background: $wht; } // color: $wht; background-color:$slate;
        @media #{$medium-only} { @include span(4 of 12 last no-gutters); width: 33.3333333%; }
        @media #{$small-only} { width: 20%; }
    }

    select {
        @include clear();
        @include span(4 of 12);
        border: 0;
        margin: 0 auto;
        padding: 0;
        text-align: center;
        background-color: transparent;
        color: $placholderTextcolor;

        // each dropdown item
        & > option {
            color: $slate;
            background-color: transparent;
            &:disabled {color: $placholderTextcolor;} // work around for placeholder
        }

        // IE - hides default dropdown arrows
        select::-ms-expand {display: none;}

        @include triangle($placholderTextcolor);
        background-position: 80% 50%;

        @media #{$medium-down} { @include span(4 of 12 no-gutters);  width: 33.3333333%; }
        @media #{$medium-only} { padding-left: $base-vertical; text-align: left; }
        @media #{$small-only} {width: 40%; text-align: left; padding-left: $base-vertical; }

    }

    //  hover / focus backgrounds
    // *****************************
    //  - uses input states to trigger adjacent labels and button to also
    //    have a white background when the search input has focus
    // *****************************

    // hover and focus states
    // ************************
    //  - when hovering over .psuedo-search, styles for select and the button
    &:focus input ~ select,
    &:hover input ~ select,
    input[type="search"]:focus ~ button.fa,
    input[type="search"]:checked ~ button.fa,
    input[type="search"]:active ~ button.fa {
        background-color:$wht;
        color: $placholderTextcolor;
        border-color: #252525;
        @include hover() { color: $slate; &.fa {color: $slate;} }
    }

    // when the search input has focus, it will styles the select dropdowns
    input[type="search"]:focus ~ select,
    input[type="search"]:checked ~ select,
    input[type="search"]:active ~ select {
        background-color:$wht;
        color: $placholderTextcolor;
        @include triangle($slate);
        background-position: 80% 50%;
        @include hover() { color: $slate; @include triangle($slate); background-position: 80% 50%; }
    }

    // when the wrapper element is hovered, applies unified styles throughout
    // ************************************************************************
    @include hover() {
        color: $placholderTextcolor;
        border-color: #252525;
        background: $wht;
        select  {
            color: $placholderTextcolor;
            background-color: $wht;
            @include triangle($slate);
            background-position: 80% 50%;
            @include hover() { @include triangle($slate); background-position: 80% 50%; }
        }
        input[type="search"] { color: $slate; }
    }

}











// CODYHOUSE Search overlay






/* --------------------------------

File#: _2_full-screen-search
Title: Full Screen Search
Descr: A full-screen window w/ a search input element
Usage: codyhouse.co/license

-------------------------------- */

:root {
  --fs-search-btn-size: 3em;
  --fs-search-border-bottom-width: 2px;
}

.modal--search {
  background-color: alpha(var(--color-bg), 0.95);

  .modal__close-btn {
    background-color: var(--color-contrast-lower);

    .icon {
      color: var(--color-contrast-high);
    }

    &:hover {
      background-color: var(--color-contrast-low);
    }
  }
}

.full-screen-search {
  position: relative;
  width: calc(100% - 2*var(--component-padding));
  max-width: var(--max-width-sm);
  background-image: linear-gradient(transparent calc(100% - var(--fs-search-border-bottom-width) * 2), var(--color-contrast-low) calc(100% - var(--fs-search-border-bottom-width) * 2), var(--color-contrast-low) calc(100% - var(--fs-search-border-bottom-width)), transparent var(--fs-search-border-bottom-width)); // border bottom
}

.full-screen-search__input {
  background: transparent; // reset
  font-size: var(--text-xl);
  width: 100%;
  padding: var(--space-sm) var(--fs-search-btn-size) var(--space-sm) var(--space-xs);
  background-image: linear-gradient(transparent calc(100% - var(--fs-search-border-bottom-width) * 2), var(--color-primary) calc(100% - var(--fs-search-border-bottom-width) * 2), var(--color-primary) calc(100% - var(--fs-search-border-bottom-width)), transparent var(--fs-search-border-bottom-width)); // border bottom
  background-size: 0% 100%;
  background-repeat: no-repeat;

  &:focus {
    outline: none;
    background-size: 100% 100%;
  }
}

.full-screen-search__input::-webkit-search-decoration,
.full-screen-search__input::-webkit-search-cancel-button,
.full-screen-search__input::-webkit-search-results-button,
.full-screen-search__input::-webkit-search-results-decoration {
  display: none;
}

.full-screen-search__btn {
  position: absolute;
  top: calc(50% - 1.5em);
  right: var(--space-xs);
  height: var(--fs-search-btn-size);
  width: var(--fs-search-btn-size);
  background-color: var(--color-primary);
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  .icon {
    display: block;
    color: var(--color-white);
    width: 1.25em;
    height: 1.25em;
    transition: transform .2s;
  }

  &:hover {
    .icon {
      transform: scale(1.1);
    }
  }
}

// animation = on
.modal--search[data-animation="on"] {
  .full-screen-search__input {
    transition: background-size .3s;
  }

  .full-screen-search__btn {
    transform: translateY(100%) scale(0.6);
    opacity: 0;
  }

  &.modal--is-visible {
    .full-screen-search__btn {
      animation: full-screen-search__btn .3s forwards var(--ease-out);
    }
  }
}

@keyframes full-screen-search__btn {
  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}





/* --------------------------------

File#: _1_modal-window
Title: Modal Window
Descr: A modal dialog used to display critical information
Usage: codyhouse.co/license

-------------------------------- */

:root {
  // close button
  --modal-close-btn-size: 1.25em;
  --modal-close-btn-padding: var(--space-sm);
}

.modal {
  position: fixed;
  z-index: var(--zindex-overlay);
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: alpha(var(--color-contrast-higher), 0.9);
  // hide element
  opacity: 0;
  visibility: hidden;
}

.modal--is-visible {
  opacity: 1;
  visibility: visible;
}

.modal__content {
  border-radius: var(--radius-md);
  overflow: auto;
  width: calc(100% - 2*var(--component-padding));
  max-height: calc(100vh - 4*(var(--modal-close-btn-size) + var(--modal-close-btn-padding)));
  background-color: var(--color-bg);
}

.modal__header {
  padding: var(--space-sm) var(--component-padding);
  background-color: var(--color-contrast-lower);
  // align title and icon (if icon is placed inside header)
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal__body {
  height: 100%;
  padding: var(--space-sm) var(--component-padding);
}

.modal__footer {
  padding: var(--component-padding);
}

.modal__close-btn {
  position: fixed;
  top: var(--space-sm);
  right: var(--space-sm);
  z-index: var(--zindex-fixed-element);
  padding: var(--modal-close-btn-padding);
  border-radius: 50%;
  background-color: alpha(var(--color-contrast-higher), 0.8);

  &:hover {
    background-color: var(--color-contrast-higher);
  }

  .icon {
    display: block;
    color: var(--color-bg);
    width: var(--modal-close-btn-size);
    height: var(--modal-close-btn-size);
  }
}

// if close btn is inside content (e.g, inside header)
.modal__content {
  .modal__close-btn { // alt close btn style (if inside modal content)
    --modal-close-btn-size: 1em;
    --modal-close-btn-padding: 0.5em;
    position: static;
    flex-shrink: 0;
    background-color: var(--color-bg);
    box-shadow: var(--shadow-sm);
    transition: .2s;

    .icon {
      color: inherit;
    }

    &:hover {
      box-shadow: var(--shadow-md);

      .icon {
        color: var(--color-contrast-higher);
      }
    }
  }
}

// close btn sticky within content
.modal__content {
  .modal__close-btn--sticky {
    position: sticky;
    float: right;
    top: 0;
    right: 0;
  }
}

// --header-is-fixed
.modal--header-is-fixed {
  .modal__header {
    position: sticky;
    top: 0;
  }
}

// --footer-is-fixed
.modal--footer-is-fixed {
  .modal__footer {
    position: sticky;
    bottom: 0;
    background: var(--color-bg);
    box-shadow: var(--shadow-sm);
  }
}

// if animation = enabled
.modal[data-animation="on"] {
  transition: opacity .3s, visibility .3s;

  .modal__content {
    will-change: transform;
    transition: transform .3s var(--ease-out);
    transform: translateY(10%);
  }

  &.modal--is-visible .modal__content {
    transform: translateY(0);
  }
}
